# ๐ ุฑุงูููุง ุซุจุช IP ุณุฑูุฑ ุฏุฑ ุฏุฑฺฏุงู ูพุฑุฏุงุฎุช ุณูพูุฑ

## โ ูุฑุงุญู ุงูุฌุงู ฺฉุงุฑ

### ูุฑุญูู 1: Deploy ฺฉุฏ ุฑู ุณุฑูุฑ

1. ฺฉุฏ ุฑุง ุฑู ุณุฑูุฑ ุงุตู deploy ฺฉูุฏ
2. ูุทูุฆู ุดูุฏ ฺฉู ุณุฑูุฑ ุฏุฑ ุฏุณุชุฑุณ ุงุณุช ู ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช

### ูุฑุญูู 2: ุฏุฑุงูุช IP ุนููู ุณุฑูุฑ

**โ๏ธ ูฺฉุชู ููู**: ุจุงุฏ IP ุนููู ุณุฑูุฑ ุงุตู ุฑุง ุฏุฑุงูุช ฺฉูุฏ (ูู IP ngrok ุง localhost)

#### ุฑูุด 1: ุงุฒ ุฎูุฏ ุณุฑูุฑ (ุชูุตู ูโุดูุฏ)

ุจู ุณุฑูุฑ SSH ุจุฒูุฏ ู ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:

```bash
# ุฑูุด 1
curl ifconfig.me

# ุฑูุด 2
curl ipinfo.io/ip

# ุฑูุด 3
curl icanhazip.com

# ุฑูุด 4 (ุงุฒ Python)
python3 -c "import requests; print(requests.get('https://api.ipify.org').text)"
```

#### ุฑูุด 2: ุงุณุชูุงุฏู ุงุฒ ุงุณฺฉุฑูพุช Python

ุงุฒ ุงุณฺฉุฑูพุช ููุฌูุฏ ุฏุฑ ูพุฑูฺู ุงุณุชูุงุฏู ฺฉูุฏ:

```bash
cd config
python get_server_ip.py
```

ุงู ุงุณฺฉุฑูพุช IP ุฑุง ุฏุฑุงูุช ูโฺฉูุฏ ู ูุชู ุงูู ุฑุง ูู ุจุฑุง ุดูุง ุขูุงุฏู ูโฺฉูุฏ.

#### ุฑูุด 3: ุงุฒ ูพูู ูุฏุฑุช ุณุฑูุฑ

ุงฺฏุฑ ุงุฒ ุณุฑูุณโูุง ุงุจุฑ ุงุณุชูุงุฏู ูโฺฉูุฏ (ูุซู DigitalOceanุ AWSุ Azure ู...):
- ุจู ูพูู ูุฏุฑุช ุณุฑูุฑ ุจุฑูุฏ
- IP ุนููู ุณุฑูุฑ ุฑุง ุงุฒ ุจุฎุด Network/Settings ูุดุงูุฏู ฺฉูุฏ

### ูุฑุญูู 3: ุงุฑุณุงู ุงูู ุจู ูพุดุชุจุงู

**ุงุทูุงุนุงุช ุชูุงุณ**:
- **Email**: `ipg3@sepehrpay.com`
- **Subject**: `ุซุจุช IP ุจุฑุง ุชุฑููุงู 98743989`

**ูุชู ุงูู** (ููุท IP ุฑุง ุฌุงฺฏุฒู ฺฉูุฏ):

```
ุณูุงู

ูุทูุงู IP ุฒุฑ ุฑุง ุจุฑุง ุชุฑููุงู 98743989 ุฏุฑ ุฏุชุงุจุณ ุซุจุช ฺฉูุฏ:

ุดูุงุฑู ุชุฑููุงู: 98743989
IP ุณุฑูุฑ: [IP_PUBLIC_SERVER]

ุจุง ุชุดฺฉุฑ
```

**ูุซุงู** (ุงฺฏุฑ IP ุดูุง `185.123.45.67` ุจุงุดุฏ):

```
ุณูุงู

ูุทูุงู IP ุฒุฑ ุฑุง ุจุฑุง ุชุฑููุงู 98743989 ุฏุฑ ุฏุชุงุจุณ ุซุจุช ฺฉูุฏ:

ุดูุงุฑู ุชุฑููุงู: 98743989
IP ุณุฑูุฑ: 185.123.45.67

ุจุง ุชุดฺฉุฑ
```

### ูุฑุญูู 4: ุงูุชุธุงุฑ ุจุฑุง ุชุงุฏ

- ูพุณ ุงุฒ ุงุฑุณุงู ุงููุ ููุชุธุฑ ูพุงุณุฎ ูพุดุชุจุงู ุจูุงูุฏ
- ูุนูููุงู 1-2 ุฑูุฒ ฺฉุงุฑ ุทูู ูโฺฉุดุฏ
- ูพุณ ุงุฒ ุซุจุช IP ุฏุฑ ุฏุชุงุจุณ ุฏุฑฺฏุงูุ ุฎุทุง `Status: -2` ุจุฑุทุฑู ูโุดูุฏ

### ูุฑุญูู 5: ุชุณุช ุงุชุตุงู

ูพุณ ุงุฒ ุซุจุช IPุ ูโุชูุงูุฏ ุฏุฑุฎูุงุณุช ูพุฑุฏุงุฎุช ุฑุง ุชุณุช ฺฉูุฏ:

```bash
# ุชุณุช ุฏุฑุฎูุงุณุช GetToken
curl -X POST https://sepehr.shaparak.ir:8081/V1/PeymentApi/GetToken \
  -H "Content-Type: application/json" \
  -d '{
    "TerminalID": "98743989",
    "Amount": "20000",
    "InvoiceID": "123456",
    "callbackURL": "https://your-domain.com/api/wallet/payment-callback/",
    "payload": ""
  }'
```

ุงฺฏุฑ IP ุซุจุช ุดุฏู ุจุงุดุฏุ ุจุงุฏ ูพุงุณุฎ ูููู ุฏุฑุงูุช ฺฉูุฏ:
```json
{
  "Status": 0,
  "Accesstoken": "TOKEN_RECEIVED",
  "Message": "ูููู"
}
```

---

## โ๏ธ ูฺฉุงุช ููู

1. **IP ngrok**: ุงฺฏุฑ ุงุฒ ngrok ุงุณุชูุงุฏู ูโฺฉูุฏุ ุจุงุฏ IP ุณุฑูุฑ ุงุตู ุฑุง ุงุฑุณุงู ฺฉูุฏ (ูู IP ngrok)
2. **IP ุฏุงูุงูฺฉ**: ุงฺฏุฑ IP ุณุฑูุฑ ุดูุง ุฏุงูุงูฺฉ ุงุณุชุ ุจุงุฏ ุจู ูพุดุชุจุงู ุงุทูุงุน ุฏูุฏ
3. **ฺูุฏ IP**: ุงฺฏุฑ ุณุฑูุฑ ุดูุง ฺูุฏ IP ุฏุงุฑุฏุ ููู IP ูุง ุฑุง ุงุฑุณุงู ฺฉูุฏ
4. **Firewall**: ูุทูุฆู ุดูุฏ ฺฉู ุณุฑูุฑ ุดูุง ุจู ุฏุฑฺฏุงู ุฏุณุชุฑุณ ุฏุงุฑุฏ (ูพูุฑุช 8080 ู 8081)

---

## ๐ ุงุทูุงุนุงุช ุชูุงุณ ูพุดุชุจุงู

- **Email**: `ipg3@sepehrpay.com`
- **ููุถูุน ุงูู**: `ุซุจุช IP ุจุฑุง ุชุฑููุงู 98743989`
- **ุดูุงุฑู ุชุฑููุงู**: `98743989`

---

## โ ฺฺฉโูุณุช

- [ ] ฺฉุฏ ุฑู ุณุฑูุฑ deploy ุดุฏู ุงุณุช
- [ ] IP ุนููู ุณุฑูุฑ ุฏุฑุงูุช ุดุฏู ุงุณุช
- [ ] ุงูู ุจู ูพุดุชุจุงู ุงุฑุณุงู ุดุฏู ุงุณุช
- [ ] ููุชุธุฑ ูพุงุณุฎ ูพุดุชุจุงู ูุณุชุฏ
- [ ] ูพุณ ุงุฒ ุซุจุช IPุ ุชุณุช ุงุชุตุงู ุงูุฌุงู ุดุฏู ุงุณุช

